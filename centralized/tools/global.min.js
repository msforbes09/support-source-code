const form=document.querySelector(".modal-body"),navLink=document.querySelectorAll(".navbar-link"),loader={image:document.querySelector(".loading"),show:()=>loader.image.classList.remove("loaded"),hide:()=>loader.image.classList.add("loaded")},button={wait:e=>{const t=getComputedStyle(e).backgroundColor;document.documentElement.style.setProperty("--waiting",t),e.classList.add("clicked")},done:e=>e.classList.remove("clicked"),check:e=>!!e.classList.contains("clicked")||button.wait(e)},capitalizeWords=e=>{return e.trim().split(" ").map(e=>e[0].toUpperCase()+e.slice(1).toLowerCase()).join(" ")},departmentManager={load:()=>{$.ajax({type:"post",url:"db/getDeptList.php",dataType:"json",error:e=>alert(e.responseText),complete:()=>{loader.hide()},success:e=>{const t=e.map((e,t)=>`<tr><td>${t+1}</td><td>${e.deptName}</td></tr>`).join("");deptTable.innerHTML=t}})},add:e=>{button.check(form.querySelector('[type="submit"]'))||$.ajax({type:"post",url:"db/saveNewDept.php",data:e,error:e=>alert(e.responseText),complete:()=>button.done(document.querySelector(".clicked")),success:e=>{e?alert(e):(loader.show(),$(".modal").modal("hide"),departmentManager.load())}})}},staffManager={load:()=>{$.ajax({type:"post",url:"db/getStaffList.php",dataType:"json",error:e=>alert(e.responseText),complete:()=>{loader.hide()},success:e=>{const t=e.map((e,t)=>`<tr><td>${t+1}</td><td>${e.idNum}</td><td>${e.fullName}</td><td>${e.nickName}</td><td>${e.deptName}</td></tr>`).join("");staffTable.innerHTML=t}})},add:e=>{button.check(form.querySelector('[type="submit"]'))||$.ajax({type:"post",url:"db/saveNewStaff.php",data:e,error:e=>alert(e.responseText),complete:()=>button.done(document.querySelector(".clicked")),success:e=>{e?alert(e):(loader.show(),$(".modal").modal("hide"),staffManager.load())}})}},processManager={load:()=>{$.ajax({type:"post",url:"db/getProcessList.php",dataType:"json",error:e=>alert(e.responseText),complete:()=>{loader.hide()},success:e=>{const t=e.map((e,t)=>`<tr><td>${t+1}</td><td>${e.deptName}</td><td>${e.procName}</td></tr>`).join("");processTable.innerHTML=t}})},add:e=>{button.check(form.querySelector('[type="submit"]'))||$.ajax({type:"post",url:"db/saveNewProcess.php",data:e,error:e=>alert(e.responseText),complete:()=>button.done(document.querySelector(".clicked")),success:e=>{e?alert(e):(loader.show(),$(".modal").modal("hide"),processManager.load())}})}},eventManager={load:()=>{$.ajax({type:"post",url:"db/getProcessEventList.php",dataType:"json",error:e=>alert(e.responseText),complete:()=>{loader.hide()},success:e=>{const t=e.map((e,t)=>`<tr><td>${t+1}</td><td>${e.deptName}</td><td>${e.eventName}</td></tr>`).join("");processEventTable.innerHTML=t}})},add:e=>{button.check(form.querySelector('[type="submit"]'))||$.ajax({type:"post",url:"db/saveNewProcessEvent.php",data:e,error:e=>alert(e.responseText),complete:()=>button.done(document.querySelector(".clicked")),success:e=>{e?alert(e):(loader.show(),$(".modal").modal("hide"),eventManager.load())}})}},categoryManager={load:()=>{$.ajax({type:"post",url:"db/getPlanCategoryList.php",dataType:"json",error:e=>alert(e.responseText),complete:()=>{loader.hide()},success:e=>{const t=e.map((e,t)=>`<tr><td>${t+1}</td><td>${e.deptName}</td><td>${e.planCategory}</td><td>${e.categoryDesc}</td><td>${e.categoryPoint}</td></tr>`).join("");planCategoryTable.innerHTML=t}})},add:e=>{button.check(form.querySelector('[type="submit"]'))||$.ajax({type:"post",url:"db/saveNewPlanCategory.php",data:e,error:e=>alert(e.responseText),complete:()=>button.done(document.querySelector(".clicked")),success:e=>{e?alert(e):(loader.show(),$(".modal").modal("hide"),categoryManager.load())}})}},mistakeManager={load:()=>{$.ajax({type:"post",url:"db/getMistakeCategoryList.php",dataType:"json",error:e=>alert(e.responseText),complete:()=>{loader.hide()},success:e=>{const t=e.map((e,t)=>`<tr><td>${t+1}</td><td>${e.deptName}</td><td>${e.mistakeCategory}</td><td>${e.mistakeDesc}</td><td>${e.mistakePoint}</td></tr>`).join("");mistakeCategoryTable.innerHTML=t}})},add:e=>{button.check(form.querySelector('[type="submit"]'))||$.ajax({type:"post",url:"db/saveNewMistakeCategory.php",data:e,error:e=>alert(e.responseText),complete:()=>button.done(document.querySelector(".clicked")),success:e=>{e?alert(e):(loader.show(),$(".modal").modal("hide"),mistakeManager.load())}})}};navLink.forEach(e=>{e.addEventListener("click",loader.show)}),$(".modal").on("shown.bs.modal",function(){form.querySelector(".form-control").focus()});